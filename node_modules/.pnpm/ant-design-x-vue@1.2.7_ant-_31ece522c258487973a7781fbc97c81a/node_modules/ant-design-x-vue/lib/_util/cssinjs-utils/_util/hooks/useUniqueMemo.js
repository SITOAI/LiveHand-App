"use strict";var o=Object.defineProperty;var n=(a,e,t)=>e in a?o(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var c=(a,e,t)=>n(a,typeof e!="symbol"?e+"":e,t);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),u=1e3*60*10;class h{constructor(){c(this,"map",new Map);c(this,"objectIDMap",new WeakMap);c(this,"nextID",0);c(this,"lastAccessBeat",new Map);c(this,"accessBeat",0)}set(e,t){this.clear();const s=this.getCompositeKey(e);this.map.set(s,t),this.lastAccessBeat.set(s,Date.now())}get(e){const t=this.getCompositeKey(e),s=this.map.get(t);return this.lastAccessBeat.set(t,Date.now()),this.accessBeat+=1,s}getCompositeKey(e){return e.map(s=>s&&typeof s=="object"?`obj_${this.getObjectID(s)}`:`${typeof s}_${s}`).join("|")}getObjectID(e){if(this.objectIDMap.has(e))return this.objectIDMap.get(e);const t=this.nextID;return this.objectIDMap.set(e,t),this.nextID+=1,t}clear(){if(this.accessBeat>1e4){const e=Date.now();this.lastAccessBeat.forEach((t,s)=>{e-t>u&&(this.map.delete(s),this.lastAccessBeat.delete(s))}),this.accessBeat=0}}}const i=new h;function p(a,e){return r.computed(()=>{const t=i.get(e);if(t)return t;const s=a();return i.set(e,s),s})}exports.default=p;

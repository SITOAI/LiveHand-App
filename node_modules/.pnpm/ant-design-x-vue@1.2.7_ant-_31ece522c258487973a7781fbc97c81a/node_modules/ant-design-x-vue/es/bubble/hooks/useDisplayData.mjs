import { computed as s, unref as e, watch as f } from "vue";
import { useEventCallback as c } from "../../_util/hooks/use-event-callback.mjs";
import d from "../../_util/hooks/use-state.mjs";
function v(a) {
  const [o, u] = d(a.value.length), t = s(() => a.value.slice(0, e(o))), i = s(() => {
    const l = e(t)[e(t).length - 1];
    return l ? l.key : null;
  });
  f(
    a,
    () => {
      var l;
      if (u(a.value.length), !(e(t).length && e(t).every((n, y) => {
        var r;
        return n.key === ((r = a.value[y]) == null ? void 0 : r.key);
      }))) {
        if (e(t).length === 0)
          u(1);
        else
          for (let n = 0; n < e(t).length; n += 1)
            if (e(t)[n].key !== ((l = a.value[n]) == null ? void 0 : l.key)) {
              u(n);
              break;
            }
      }
    },
    { immediate: !0, deep: !0 }
  );
  const p = c((l) => {
    l === e(i) && u(e(o) + 1);
  });
  return [t, p];
}
export {
  v as default
};
